<ng-container *ngIf="asset">
  <div [fsDrawerSide]="drawer">
    <ng-template fsDrawerAction="related">
      <app-related-objects
        [sourceObject]="asset"
        (highlightSwitch)="getRelatedObjects()"
        (remove)="getRelatedObjects()"
        (relatesChange)="getRelatedObjects()"
        ></app-related-objects>
    </ng-template>
    <ng-template fsDrawerAction="preview">
      <img class="preview" [src]="asset?.file?.preview?.medium">
    </ng-template>
  </div>

  <form (fsForm)="save()">
    <div fsDrawerContent class="doc-drawer-container">
      <div class="container" fxLayout="column">
        <div fxLayout="row" fxLayoutGap="10px" *ngIf="config">
          <fs-gallery
            #gallery
            [config]="config">
            <ng-template fsGalleryThumbnail let-item="item">
              <div *ngIf="!item.file"> Empty File </div>
            </ng-template>
            <ng-template fsGalleryPreview let-item="item">
              <div *ngIf="item.name">{{ item.name }}</div>
            </ng-template>
          </fs-gallery>

          <div fxLayout="column" fxFlex>
            <app-object-identifier [object]="asset" [project]="asset.project"></app-object-identifier>

            <mat-form-field fxFlex>
              <input matInput [(ngModel)]="asset.name" name="name">
            </mat-form-field>
          </div>
        </div>

        <app-highlighted-related-view [objects]="relatedObjects"></app-highlighted-related-view>
        <fs-attribute-field
            class="tag"
            [data]="{ project_id: asset.project_id, object_id: asset.id }">
        </fs-attribute-field>
        <fs-label-field>
          <fs-label>Content</fs-label>
          <app-rich-text [content]="asset.content" (changed)="changedContent($event)" name="content" placeholder="Content"></app-rich-text>
        </fs-label-field>

        <div>
          <button mat-button color="primary">Save</button>
        </div>
      </div>
    </div>
  </form>
</ng-container>
