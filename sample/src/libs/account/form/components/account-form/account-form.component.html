<form *ngIf="account" (fsForm)="save()" [fsSkeletonForm]="account.id">
  <ng-container *ngIf="account">
    <div fxLayout="row" fxLayoutGap="50px" fxLayoutGap.xs="0" fxLayout.xs="column" class="h2-container">
      <div>
        <h2>Personal Information</h2>
          <div>
            <fs-file-image-picker
              #avatarPicker
              class="account-image-picker"
              (select)="onUpload($event)"
              [url]="account.image.small"
              [imageWidth]="500"
              [imageHeight]="500"
              [imageQuality]="0.8"
              [previewDiameter]="100"
              *ngIf="account.id">
            </fs-file-image-picker>

            <div fxLayout="row" fxLayoutGap="10px" fxLayoutGap.md="0" fxLayout.xs="column" fxLayout.sm="column" fxLayout.md="column">
              <mat-form-field fxFlex="50">
                <input matInput placeholder="First Name" [(ngModel)]="account.first_name"
                      name="first_name" fsFormRequired>
              </mat-form-field>
              <mat-form-field fxFlex>
                <input matInput placeholder="Last Name" [(ngModel)]="account.last_name" name="last_name"
                      fsFormRequired>
              </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout="column">
              <mat-form-field fxFlex>
                <input matInput placeholder="Email" [(ngModel)]="account.email" name="email" fsFormEmail
                      fsFormRequired>
              </mat-form-field>
              <mat-form-field fxFlex>
                <input matInput placeholder="Phone Number" [(ngModel)]="account.phone" name="phone" fsPhone fsFormPhone>
              </mat-form-field>
            </div>

            <fs-address-picker [(address)]="account.address" format="twoline"></fs-address-picker>

            <app-timezone-select [(timezone)]="account.timezone"></app-timezone-select>
            <button mat-raised-button type="submit" color="primary">Save</button>
          </div>
      </div>

      <div fxFlex *ngIf="account.id">
        <h2>Account Status</h2>
        <fs-account-status
          [created]="account.create_date"
          [email]="account.email"
          [status]="account.state"
          [statuses]="statuses"
          [activationEmailDate]="account.activate_email_date"
          [activationEmailMessage]="account.activate_email_message"
          statusLabel="Account Status"
          (action)="statusAction($event)">
        </fs-account-status>

        <h2>Sign-in & Security</h2>

        <fs-signin-security
          *ngIf="isAccountSignedIn"
          [email]="account.email"
          [lastSignIn]="account.signin_date"
          passwordBehavior="change"
          (changePassword)="changePassword($event)">
        </fs-signin-security>

        <fs-signin-security
          *ngIf="!isAccountSignedIn"
          [email]="account.email"
          [lastSignIn]="account.signin_date"
          passwordBehavior="reset"
          (resetPassword)="resetPassword($event)">
        </fs-signin-security>

        <ng-container *ngIf="social">
          <app-account-social [accountId]="account.id" [allowEdit]="socialEdit"></app-account-social>
        </ng-container>
      </div>
    </div>
  </ng-container>
</form>
