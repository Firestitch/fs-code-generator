<div class="search" fxLayout="column">
  <div class="navbar">
    <div *ngIf="selectedClass.value === searchObjectClass.All; else headingNotAll">
      <div class="mat-dialog-title">Search</div>
    </div>
    <ng-template #headingNotAll>
      <div class="mat-dialog-title">
        <a  class="back"
            (click)="selectSearchClass(searchObjectClass.All, true)">
          <mat-icon>keyboard_arrow_left</mat-icon>
        </a>
        Search {{ selectedClass.pluralName }}
      </div>
    </ng-template>
  </div>

  <div class="container-filter">
    <fs-filter
      #filter
      [config]="config">
    </fs-filter>
  </div>

  <app-subsearch
    #subsearch
    *ngIf="!recentHistory && objects.length && selectedClass.value === searchObjectClass.All"
    [searchObjectClasses]="searchObjectClasses"
    [selected]="selectedClass.value"
    (select)="selectSearchClass($event, true)">
  </app-subsearch>
</div>
<mat-dialog-content>
  <div class="classes">
    <div *ngIf="objects.length; else noResults" class="object-class">
      <div *ngIf="recentHistory" class="class" fxLayout="row" fxLayoutAlign="start center">
        <span class="name" fxFlex>Recent</span>
      </div>

      <div *ngFor="let object of objects" class="object" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="20px">
        <mat-checkbox *ngIf="selectable" (change)="selectEntity($event, object)" [checked]="object.selected"></mat-checkbox>
        <fs-badge *ngIf="object?.project?.image.small" size="35" shape="circle" [image]="object.project.image.small"></fs-badge>
        <div class="details" fxLayout="column" fxLayoutAlign="center start">
          <a class="name" (click)="navigateTo(object)">{{ object.name }}</a>
          <div class="identifier" fxLayout="row" fxLayoutAlign="start center">
            <mat-icon *ngIf="classesIndexed[object.class]" [ngStyle]="{ color: classesIndexed[object.class].color }">{{ classesIndexed[object.class].icon }}</mat-icon>
            <app-object-identifier [object]="object" [project]="object?.project"></app-object-identifier>
          </div>
        </div>
        <div fxFlex></div>

        <app-highlight-related
          *ngIf="selectable && highlightOriginObject && object.selected"
          [object]="highlightOriginObject"
          [relatedObject]="object"
          (highlightSwitch)="onHighlightSwitch($event)">
        </app-highlight-related>
      </div>

      <button mat-button *ngIf="hasMore" class="load-more" (click)="loadMore()">
        Load More
      </button>

    </div>
  </div>
  <ng-template #noResults>
    <div class="no-results" *ngIf="loading | async">No Results</div>
  </ng-template>
</mat-dialog-content>
