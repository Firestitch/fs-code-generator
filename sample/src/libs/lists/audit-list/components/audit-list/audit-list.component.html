<fs-list [config]="config" #list>

    <fs-list-column>
      <ng-template fs-list-header>
        Type
      </ng-template>
      <ng-template fs-list-cell let-row="row">
        <ng-container [ngSwitch]="row.type">
          <mat-icon *ngSwitchCase="'create'" title="Create">fiber_new</mat-icon>
          <mat-icon *ngSwitchCase="'delete'" title="Delete">delete</mat-icon>
          <mat-icon *ngSwitchCase="'add'" title="Add">add</mat-icon>
          <mat-icon *ngSwitchCase="'remove'" title="Remove">delete</mat-icon>
          <mat-icon *ngSwitchCase="'change'" title="Change">edit</mat-icon>
          <mat-icon *ngSwitchCase="'login'" title="Login">supervised_user_circle</mat-icon>
          <mat-icon *ngSwitchCase="'signin'" title="Signin">supervised_user_circle</mat-icon>
        </ng-container>
      </ng-template>
    </fs-list-column>

    <fs-list-column>
      <ng-template fs-list-header>
        Subject
      </ng-template>
      <ng-template fs-list-cell let-row="row">
        <small>{{ row.object.class_name }}</small>
        <div>
          <a (click)="proceedObject(row.object)">{{ row.object.name }}</a>
        </div>
      </ng-template>
    </fs-list-column>

    <fs-list-column>
      <ng-template fs-list-header>
        Detail
      </ng-template>
      <ng-template fs-list-cell let-row="row">

        <div class="meta">
          <ng-container [ngSwitch]="row.type">
            <ng-container *ngSwitchCase="'login'">Logged In</ng-container>
            <ng-container *ngSwitchCase="'delete'">Deleted</ng-container>
            <ng-container *ngSwitchCase="'add'">Added</ng-container>
            <ng-container *ngSwitchCase="'create'">
              <a href="javascript:;" (click)="row.showMeta=!row.showMeta">
                Created With
                {{row.meta.length}} {{row.meta.length === 1 ? 'Property' : 'Properties' }}
              </a>
            </ng-container>
            <ng-container *ngSwitchCase="'change'">
              <a href="javascript:;" (click)="row.showMeta=!row.showMeta">
                Changed
                {{row.meta.length}} {{row.meta.length === 1 ? 'Property' : 'Properties' }}
              </a>
            </ng-container>
          </ng-container>

          <ul class="metas" *ngIf="row.showMeta">
            <li *ngFor="let meta of row.meta" class="meta-item">
              {{meta.description || meta.name}}:
              <ng-container [ngSwitch]="meta.name" *ngIf="meta.object">
                <ng-container *ngSwitchCase="'status_id'">{{ meta.object.name }}</ng-container>
                <ng-container *ngSwitchCase="'category_id'">{{ meta.object.name }}</ng-container>
                <ng-container *ngSwitchCase="'type_id'">{{ meta.object.name }}</ng-container>
                <ng-container *ngSwitchCase="'assigned_account_id'">{{ meta.object.name }}</ng-container>
                <ng-container *ngSwitchCase="'priority'">{{ meta.value }}</ng-container>
                <ng-container *ngSwitchCase="'task_id'">{{  meta.object.name }}</ng-container>
                <ng-container *ngSwitchCase="'doc_id'">{{  meta.object.name }}</ng-container>
                <ng-container *ngSwitchCase="'project_id'">{{  meta.object.name }}</ng-container>
                <ng-container *ngSwitchCase="'object_id'">{{ meta.object?.name }}</ng-container>
                <ng-container *ngSwitchDefault>{{meta.value}}</ng-container>
              </ng-container>
              <ng-container *ngIf="!meta.object">{{meta.value}}</ng-container>
            </li>
          </ul>
        </div>

        <div><small *ngIf="row.description">{{ row.description }}</small></div>
      </ng-template>
    </fs-list-column>

    <fs-list-column name="actor_name" title="Actor" [sortable]="true">
      <ng-template fs-list-header>
        Actor
      </ng-template>
      <ng-template fs-list-cell let-row="row">
        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
          <a [routerLink]="['/admin/accounts',row.actor_account.id]">
            <app-account-image [account]="row.actor_account" [longName]="true"></app-account-image>
          </a>
        </div>
      </ng-template>
    </fs-list-column>

    <fs-list-column name="date" title="Date" [sortable]="true" width="10%">
      <ng-template fs-list-header>
        Date
      </ng-template>
      <ng-template fs-list-cell let-row="row">
        {{ row.date | fsDateAgo }}
      </ng-template>
    </fs-list-column>

  </fs-list>
